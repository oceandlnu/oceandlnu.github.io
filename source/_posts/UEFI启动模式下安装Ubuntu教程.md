---
layout: post
title: UEFI启动模式下安装Ubuntu教程
date: 2017-09-11 21:26:56
tags:
 - Linux
 - Ubuntu
categories:
 - linux
description: UEFI启动模式下安装Ubuntu教程
copyright: true
---

### 制作Ubuntu启动盘

个人习惯于使用U盘安装的方式，简单快捷。那么准备好一个空的U盘，首先去[Ubuntu官网](https://www.ubuntu.com/download/desktop)下载最新的Ubuntu 16.04的ISO映像文件，然后需要下载制作启动盘的工具，这里建议使用Ubuntu官方主推的工具[Rufus](https://rufus.akeo.ie/?locale=zh_CN)，详见网页：[How to create a bootable USB stick on Windows](https://tutorials.ubuntu.com/tutorial/tutorial-create-a-usb-stick-on-windows) ，使用该工具的时候，有三种模式可选，到底是用那种模式取决于电脑的配置，可以百度一下电脑主板是不是UEFI以及硬盘分区是MBR还是GPT，确实不清楚的就选第一项。当然，有同学也喜欢使用软碟通等刻盘工具，这也是没问题的，甚至有资料说直接解压到空的U盘也能行。总之很多方式都能做成系统启动盘。

为Ubuntu系统分配硬盘空间

接下来，我们需要为Ubuntu在硬盘上分配足够的空间，一般来说需要至少100GB的空间才用的舒服。右键点击windows键（windows+X）选择磁盘管理，然后选择你需要进行分区的磁盘，点击右键，选择“压缩卷”，设置需要压缩空间的大小，点击压缩，等一会，空间就压缩好了，会出现一个未分配空间，这就是我们刚才压缩出来的空间，到这里分配空间就ok了。

说明一下，Ubuntu系统总共需要四个磁盘空间：根目录、home目录、交换空间和启动引导空间。有种比较老的方法是在Windows系统中提前划分好这四个空间再安装，私以为这还不如直接在Ubuntu安装界面中划分来的方便，也能减少安装出错的可能。

### 安装Ubuntu系统

关闭Windows的快速启动，重启电脑。按住Win + X(请记住这个万能的组合)，选择“电源选项”，依次执行：选择电源按钮的功能 - 更改当前不可用的设置 - 启用快速启动（把勾去掉）-保存修改

把启动盘插入笔记本电脑，重启系统，进入BIOS，首先修改BIOS选项，需要确保boot mode为UEFI，以及关闭secure boot（很重要，如不设置，可能导致装完nvidia显卡驱动后无限重启）。

然后修改启动项。在明确支持UEFI启动的笔记本电脑中，BIOS启动项可以看到两个U盘，那其实是一个U盘的两种模式，这里需要选择带有“UEFI”字样的U盘作为第一启动项。

保存设置并退出BIOS，就可以进入安装界面了。一般来说，会出现直接安装和试用的选项。新手可以点击试用“Try Ubuntu”，体验下该系统，然后还能继续安装。

首先应该是选择语言，直接照着中文去就行了。在“准备安装”菜单，勾选下面的“为图形和无线硬件，以及 MP3 和媒体安装第三方软件”，上面的“安装Ubuntu时下载更新”不用勾选，这些东西以后可以通过系统更新来安装。然后进入“安装类型”菜单，这里选择“其他选项”。

接下来就是最重要的安装分区了，在界面中可以看到不少分区，我们用鼠标拖到最后，选择刚才分配的200GB空闲空间，鼠标双击或者点击“+”按钮，就从这里依次分出四个子空间。

![](/uploads/2017-09-11/1.png)

#### 分配启动引导空间

如果没有引导，就无法进入系统。我们选中那200GB空闲空间，鼠标双击，或者点击下面的加号，首先分配引导的空间，选中主分区（或逻辑分区）和空间起始位置。建议这部分最小也要给到500MB，系统引导文件都会在里面，我给的2048MB，它的作用和boot引导分区一样，但是boot引导是默认grub引导的，而efi显然是UEFI引导的。不要按照那些老教程去选boot引导分区，也就是最后你的挂载点里没有“/boot”这一项，否则你就没办法UEFI启动两个系统了。

__注意：选择“保留BIOS启动区域”或者“efi系统分区”都可以，这里分区类型选择的主分区，Linux不区分逻辑分区和主分区，选择逻辑分区也没有问题。__

![](/uploads/2017-09-11/2.png)

有同学可能要问了，为什么选择这个“保留BIOS启动区域”，而不是挂载“/boot”？这里需要说明下，因为该笔记本是支持UEFI的，之前博主就是采用的传统方法，挂载“/boot”，这样做的结果是，无论如何无法进入刚安好的Ubuntu系统，就连EasyBCD也不起作用，找不到Ubuntu的引导启动项。后来看到了一篇文章，大意说是UEFI启动模式下，Ubuntu的引导挂载应该是biosgrub，否则出错。在博主亲自试验之后，证实了这个说法。

当然，如果笔记本不支持UEFI模式启动，使用的是CSM兼容模式的话，倒是可以用挂载“/boot”的方式，这也实验成功过。

#### 分配交换空间

swap交换空间，选择逻辑分区和空间起始位置，所谓交换空间，也就是虚拟内存，可以小幅度提示系统的运行性能。由于本机的内存大小是8GB，所以可以分配相同大小的虚拟内存。（物理内存小于等于4G，虚拟内存建议分配物理内存的2倍大小）

![](/uploads/2017-09-11/3.png)


#### 分配根目录空间

根目录“/”，类型为EXT4日志文件系统，选中逻辑分区和空间起始位置，根目录就是系统盘，主要存放操作系统文件和安装的第三方软件，无法扩展，所以不能太小，建议最低也要给到30GB，这里应人所求，分配了70GB的磁盘空间给根目录。

![](/uploads/2017-09-11/4.png)


#### 分配/home目录空间

挂载“/home”，类型为EXT4日志文件系统，选中逻辑分区和空间起始位置，/home目录就是用户能自行操作的空间，可大可小，当然安装到这里，剩下的磁盘空间（大约120GB）都要给/home目录了，如下图所示。

![](/uploads/2017-09-11/5.png)


#### 选择引导器

分配好上述四个空间后，我们还要选择“安装启动引导器的设备”，由于刚才biosgrub的磁盘符号为/dev/sda4，所以就选择了该磁盘。

![](/uploads/2017-09-11/6.png)


一切就绪之后，点击“现在安装”，然后会让你确认分区是否正确，无误后就可以继续安装了。

![](/uploads/2017-09-11/7.png)


接着填写用户名和密码，这里建议尽可能简短，因为在以后的时间你会无数次输入它们。

最后选择“Shanghai”时区，系统开始自动安装了，你可以喝杯咖啡。

#### 调整BIOS启动顺序（可选）

安装完成后，重启电脑，还是需要进BIOS，设置Ubuntu为第一启动项，这样就可以使用GNU GRUB作为操作系统选择工具，就不用再安装easyBCD等第三方引导软件。我默认是进入Ubuntu，想要进入Windows 10需要用方向键选择后面的的选项，这个顺序也是可以改的。


—————–分割线——————

#### 非UEFI模式

部分华硕华硕和惠普笔记本在BIOS中找不到boot mode选项，也无法直接看到UEFI的相关字样。那么这种笔记本怎么安装Ubuntu呢？

简要说下，就是制作启动盘还是一样，然后BIOS中的设置会不同，我们需要设置launch csm（兼容模式）为开启，secure boot同样需要关闭。然后选择不带“UEFI”字样的U盘作为第一启动项。

安装Ubuntu的过程中，只存在引导部分不同，和上面相反，这里不选择“保留BIOS启动区域”，而是选择“逻辑分区”->“Ext4 日志文件系统”挂载“/boot”，然后启动引导器可以直接使用Ubuntu所在的整个硬盘（比如WestData机械硬盘，亲测通过），不用刻意选择/boot所在盘符。

如此这般，也能安装好Ubuntu操作系统，此时就找不到“Ubuntu”这个启动项，那我们可以设置WestData机械硬盘为第一启动项，就能使用GNU GRUB作为操作系统选择工具。也可以去安装EasyBCD，但此时需要设置Windows所在盘为第一启动项。